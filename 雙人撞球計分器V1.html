<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é›™äººæ’çƒæ¯”è³½è¨ˆåˆ†å™¨</title>
    <style>
        :root {
            --bg-color: #1e1e1e;
            --panel-bg: #2d2d2d;
            --accent-green: #27ae60;
            --accent-red: #c0392b;
            --text-main: #ffffff;
            --text-dim: #aaaaaa;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        h1 {
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
            border-bottom: 3px solid var(--accent-green);
            padding-bottom: 5px;
            text-align: center;
        }

        /* Scoreboard Container */
        .scoreboard {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            width: 100%;
            max-width: 800px;
            gap: 20px;
        }

        /* Player Panel */
        .player-card {
            background-color: var(--panel-bg);
            border-radius: 15px;
            padding: 20px;
            flex: 1;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            border: 2px solid transparent;
            transition: border 0.3s, transform 0.2s;
            position: relative;
        }

        /* å„ç©å®¶çš„å¼·èª¿è‰² */
        #p1-card:focus-within { border-color: var(--accent-green); }
        #p2-card:focus-within { border-color: var(--accent-red); }

        /* Name Input */
        input.player-name {
            background: transparent;
            border: none;
            border-bottom: 2px solid #555;
            color: var(--text-main);
            font-size: 1.5rem;
            text-align: center;
            width: 90%;
            margin-bottom: 15px;
            outline: none;
            padding: 5px;
            font-weight: bold;
        }

        input.player-name:focus {
            border-color: #fff;
        }

        /* Big Score (Racks/Games Won) - é€™è£¡ç¾åœ¨æ˜¯è¼ƒå°çš„å±€æ•¸ */
        .score-section {
            text-align: center;
            margin-bottom: 15px;
            width: 100%;
        }

        .score-label {
            font-size: 0.85rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .big-score {
            font-size: 2.5rem; /* å±€æ•¸æ”¹å° */
            font-weight: bold;
            line-height: 1;
            margin: 10px 0;
            font-variant-numeric: tabular-nums;
            color: #ccc; /* é¡è‰²ç¨å¾®èª¿æš—ä¸€é» */
        }

        /* Controls */
        .btn-group {
            display: flex;
            gap: 10px;
            justify-content: center;
            width: 80%;
            margin: 0 auto;
        }

        button {
            cursor: pointer;
            border: none;
            border-radius: 8px;
            padding: 8px 0;
            font-size: 1.5rem;
            font-weight: bold;
            transition: all 0.2s;
            color: white;
            display: flex;
            align-items: center; /* ä¿®å¾©ï¼šç¢ºä¿æŒ‰éˆ•å…§å®¹å±…ä¸­ */
            justify-content: center; /* ä¿®å¾©ï¼šç¢ºä¿æŒ‰éˆ•å…§å®¹å±…ä¸­ */
        }

        button:active {
            transform: scale(0.95);
        }

        .btn-add {
            flex: 2;
        }
        
        /* ç‚ºä¸åŒç©å®¶è¨­å®šæŒ‰éˆ•é¡è‰² */
        #p1-card .btn-add { background-color: var(--accent-green); }
        #p2-card .btn-add { background-color: var(--accent-red); }

        .btn-sub {
            background-color: #444;
            flex: 1;
        }

        .btn-sub:hover {
            background-color: #666;
        }

        /* Secondary Score (Small Points / Balls) -> ç¾åœ¨è®Šæˆä¸»è¦å¤§å­— */
        .sub-score-area {
            margin-top: auto;
            padding: 20px 10px; /* å¢åŠ é«˜åº¦ */
            border-radius: 8px;
            width: 100%;
            box-sizing: border-box;
            display: flex;
            justify-content: space-between;
            align-items: center;
            /* å¢åŠ é™°å½±è®“å®ƒæ›´ç«‹é«” */
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        }

        /* P1 å°åˆ†èƒŒæ™¯ - æ·±ç¶ è‰² */
        #p1-card .sub-score-area {
            background-color: #145A32; 
            border: 2px solid #27ae60;
        }

        /* P2 å°åˆ†èƒŒæ™¯ - æ·±ç´…è‰² */
        #p2-card .sub-score-area {
            background-color: #7B241C;
            border: 2px solid #c0392b;
        }

        .sub-score-val {
            font-size: 5.5rem; /* å°åˆ†æ”¹è¶…å¤§ */
            font-weight: bold;
            color: #ffffff; /* äº®ç™½è‰² */
            line-height: 1;
            margin: 0 10px;
            /* å¢åŠ æ–‡å­—é™°å½±ï¼Œè®“æ•¸å­—åœ¨æ·±è‰²èƒŒæ™¯ä¸Šæ›´æ¸…æ™° */
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .btn-small {
            padding: 15px 20px; /* æŒ‰éˆ•ä¹Ÿç¨å¾®åŠ å¤§æ¯”è¼ƒå¥½æŒ‰ */
            font-size: 1.5rem;
            font-weight: bold;
            min-width: 60px; /* ç¢ºä¿æŒ‰éˆ•å¯¬åº¦ */
            /* è®“æŒ‰éˆ•åœ¨æ·±è‰²èƒŒæ™¯ä¸Šä¹Ÿç¨å¾®çªå‡ºä¸€é» */
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }

        /* Global Controls */
        .global-controls {
            margin-top: 30px;
            margin-bottom: 30px;
            display: flex;
            gap: 20px;
        }

        .btn-reset {
            background-color: #7f8c8d;
            padding: 12px 40px;
            font-size: 1rem;
            text-transform: uppercase;
            color: white;
        }
        
        .btn-reset:hover {
            background-color: #95a5a6;
        }

        /* ä¸‹ä¸€å±€æŒ‰éˆ•æ¨£å¼ */
        .btn-new-rack {
            background-color: #d35400; /* æ©˜è‰² */
            padding: 12px 40px;
            font-size: 1rem;
            text-transform: uppercase;
            color: white;
        }

        .btn-new-rack:hover {
            background-color: #e67e22;
        }

        /* æŒ‰éˆ•ç¢ºèªç‹€æ…‹ (ç´…è‰²é–ƒçˆ) */
        button.confirming {
            background-color: #e74c3c !important;
            color: #fff !important;
            animation: pulse 0.5s infinite alternate;
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.5);
        }

        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }

        /* Responsive Design */
        @media (max-width: 600px) {
            .player-card {
                min-width: 100%;
            }
            .big-score {
                font-size: 4rem;
            }
            h1 {
                font-size: 1.5rem;
            }
            .global-controls {
                flex-direction: column;
                width: 100%;
            }
            .global-controls button {
                width: 100%;
            }
        }
    </style>
</head>
<body>

    <h1>ğŸ± é›™äººæ’çƒè¨ˆåˆ†æ¿</h1>

    <div class="scoreboard">
        <!-- Player 1 -->
        <div class="player-card" id="p1-card">
            <input type="text" value="å¼µå‹‡å¯Œ" class="player-name">
            
            <div class="score-section">
                <div class="score-label">å‹å±€æ•¸ (Racks)</div>
                <div class="big-score" id="p1-main-score">0</div>
                <div class="btn-group">
                    <button class="btn-sub" onclick="updateScore('p1', -1, 'main')">-</button>
                    <button class="btn-add" onclick="updateScore('p1', 1, 'main')">+</button>
                </div>
            </div>

            <div class="sub-score-area">
                <button class="btn-small btn-sub" onclick="updateScore('p1', -1, 'sub')">-</button>
                <div style="text-align: center;">
                    <span class="score-label">å°åˆ†</span><br>
                    <span class="sub-score-val" id="p1-sub-score">0</span>
                </div>
                <button class="btn-small btn-add" onclick="updateScore('p1', 1, 'sub')">+</button>
            </div>
        </div>

        <!-- Player 2 -->
        <div class="player-card" id="p2-card">
            <input type="text" value="æé †è‹±" class="player-name">
            
            <div class="score-section">
                <div class="score-label">å‹å±€æ•¸ (Racks)</div>
                <div class="big-score" id="p2-main-score">0</div>
                <div class="btn-group">
                    <button class="btn-sub" onclick="updateScore('p2', -1, 'main')">-</button>
                    <button class="btn-add" onclick="updateScore('p2', 1, 'main')">+</button>
                </div>
            </div>

            <div class="sub-score-area">
                <button class="btn-small btn-sub" onclick="updateScore('p2', -1, 'sub')">-</button>
                <div style="text-align: center;">
                    <span class="score-label">å°åˆ†</span><br>
                    <span class="sub-score-val" id="p2-sub-score">0</span>
                </div>
                <button class="btn-small btn-add" onclick="updateScore('p2', 1, 'sub')">+</button>
            </div>
        </div>
    </div>

    <div class="global-controls">
        <!-- é€™è£¡åŠ ä¸Šäº† this åƒæ•¸ä¾†æ§åˆ¶æŒ‰éˆ•ç‹€æ…‹ -->
        <button class="btn-new-rack" onclick="resetSubScores(this)">ä¸‹ä¸€å±€ (æ­¸é›¶å°åˆ†)</button>
        <button class="btn-reset" onclick="resetGame(this)">é‡ç½®æ‰€æœ‰åˆ†æ•¸</button>
    </div>

    <script>
        // Initial State
        const scores = {
            p1: { main: 0, sub: 0 },
            p2: { main: 0, sub: 0 }
        };

        const players = ['p1', 'p2'];

        /**
         * Update Score Function
         */
        function updateScore(player, change, type) {
            // Update internal state
            scores[player][type] += change;

            // Prevent negative scores
            if (scores[player][type] < 0) {
                scores[player][type] = 0;
            }

            // Update DOM
            const elementId = `${player}-${type}-score`;
            const element = document.getElementById(elementId);
            
            // Add simple animation class
            element.style.transform = "scale(1.2)";
            element.style.color = change > 0 ? "#2ecc71" : "#c0392b";
            
            setTimeout(() => {
                element.style.transform = "scale(1)";
                element.style.color = ""; // Reset color
            }, 150);

            element.innerText = scores[player][type];
        }

        // --- æŒ‰éˆ•ç¢ºèªæ©Ÿåˆ¶é‚è¼¯ ---
        let confirmTimer = null;

        function handleResetRequest(btnElement, actionCallback, confirmText) {
            if (btnElement.dataset.confirming === "true") {
                // å·²ç¶“åœ¨ç¢ºèªç‹€æ…‹ï¼ŒåŸ·è¡Œå‹•ä½œ
                actionCallback();
                resetButtonState(btnElement);
            } else {
                // ç¬¬ä¸€æ¬¡é»æ“Šï¼Œé€²å…¥ç¢ºèªç‹€æ…‹
                // å…ˆé‡ç½®å…¶ä»–å¯èƒ½æ­£åœ¨ç¢ºèªçš„æŒ‰éˆ•
                document.querySelectorAll('.confirming').forEach(el => resetButtonState(el));
                
                // å„²å­˜åŸå§‹æ–‡å­—
                const originalText = btnElement.innerText;
                btnElement.dataset.originalText = originalText;
                
                // æ”¹è®Šç‹€æ…‹
                btnElement.dataset.confirming = "true";
                btnElement.innerText = confirmText || "ç¢ºå®šå—ï¼Ÿ";
                btnElement.classList.add('confirming');
                
                // 3ç§’å¾Œè‡ªå‹•æ¢å¾©
                confirmTimer = setTimeout(() => {
                    resetButtonState(btnElement);
                }, 3000);
            }
        }

        function resetButtonState(btnElement) {
            if (btnElement.dataset.confirming === "true") {
                btnElement.innerText = btnElement.dataset.originalText;
                btnElement.dataset.confirming = "false";
                btnElement.classList.remove('confirming');
                if(confirmTimer) clearTimeout(confirmTimer);
            }
        }

        /**
         * é‡ç½®å°åˆ† (é–‹å§‹æ–°çš„ä¸€å±€)
         */
        function resetSubScores(btn) {
            handleResetRequest(btn, () => {
                players.forEach(player => {
                    scores[player].sub = 0;
                    document.getElementById(`${player}-sub-score`).innerText = 0;
                });
            }, "ç¢ºå®šæ­¸é›¶å°åˆ†ï¼Ÿ");
        }

        /**
         * é‡ç½®æ•´å ´æ¯”è³½
         */
        function resetGame(btn) {
            handleResetRequest(btn, () => {
                players.forEach(player => {
                    scores[player].main = 0;
                    scores[player].sub = 0;
                    
                    // DOM Reset
                    document.getElementById(`${player}-main-score`).innerText = 0;
                    document.getElementById(`${player}-sub-score`).innerText = 0;
                });
            }, "ç¢ºå®šé‡ç½®æ¯”è³½ï¼Ÿ");
        }
    </script>
</body>
</html>